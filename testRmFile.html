<!DOCTYPE html>
<pre>File <span id=file>file</span> with error <span id=error>error</span></pre>

<script>

 const patJSO = '/etc/test.json';
 const patYML = '/etc/spot.yml';
 const webui = 'http://127.0.0.1:5001';
 const api_url = webui + '/api/v0/'

 rmOfPath(patJSO);
 rmOfPath(patYML);
 
 function rmOfPath(path) {
     console.log('rmOfPath path '+path);
     var url = api_url + 'files/rm?&arg='+path
     console.log('rmOfPath url '+url);
     return fetchTextGetCors(url)
	 .then( obj => { return Promise.resolve(obj) })
	 .catch(err => logError(err))
 }

 function callback(tag) {
     console.log('callback tag '+tag)
     const substi = buf => {
	 let e = document.getElementById(tag);
	 e.innerHTML = buf;
     };
     return substi
 }

 function fetchTextGetCors(url) {
     return fetch(url, { method: "GET", mode: "cors"} ).then(validate).then( resp => resp.text() )
 }

 function validate(resp) {
     if (resp.status >= 200 && resp.status < 300) {
	 return Promise.resolve(resp)
     }
     return Promise.reject(new Error(resp.statusText))
 }

 function logError(err) {
     console.log('Error '+err.message);
     let e = document.getElementById('error');
     e.innerHTML = err.message;

 }
 
</script>
