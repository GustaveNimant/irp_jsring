<!DOCTYPE html>
<script>
 let ipfs_path = '/ipfs/QmSYQqCHX9LBbvfY86oBQGjCPpok4EAjPxUy7wrCWn8tuV';
 let url = 'http://127.0.0.1:5001/api/v0/file/ls?arg='+ipfs_path;
 console.log('url:'+url);

 fetch(url, { method: "POST", mode: 'cors'})
     .then (resp => {return resp.json()})
     .then (readJson)

 function readJson(json) {
     console.log('readJson json');
     console.dir(json);
     let hash = json.Arguments[ipfs_path]
     console.log('readJson hash: ',hash)
     let links = json.Objects[hash].Links
     let names = links.map ( e => e.Name )
     console.log('readJson names: ',names)
     let buf = links.map(
	 file => {
	     return '// file :name: '+file.Name
		  + ' hash: '+file.Hash
		  + ' size: '+file.Size
		  +'.'; }
     ).join("\n")

     console.log('readJson buf: ',buf)
     
     //     document.getElementById('result').innerHTML = buf;
     //     document.getElementById('code').innerHTML = document.getElementsByTagName('script')[0].innerHTML;
     
 }
</script>
