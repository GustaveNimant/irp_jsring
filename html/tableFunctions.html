<!-- Table Functions -->
<script>
 function deleteAllRowsOfTable (table) {
     console.log('deleteAllRowsOfTable.input.table:', table);

     var i = 1;  // Be careful with deleteRow : length is modified.
     while (table.rows[i]) {
	 console.log('displayJson Row i',i,table.rows[i].innerHTML);
	 table.deleteRow(i);
     }
 }

 function createHeaderOfTable (table) {
     console.log('createHeaderOfTable.input.table:', table);

     var hid = document.getElementsByClassName('hiddenForFile')[0];
     let tr = createElementTable (table,'tr', '');

     createElementTable (tr, 'th', 'Pin');
     if (hid.hidden != true) {
	 createElementTable (tr, 'th', 'Type');
	 createElementTable (tr, 'th', 'Name');
     }

     createElementTable (tr, 'th', 'Hash')   
 }

 function createTableOfEntriesOfMfsDirPath (entries, mfsDirPath){
     console.log('createTableOfEntriesOfMfsDirPath.input.entries:', entries);
     console.log('createTableOfEntriesOfMfsDirPath.input.mfsDirPath:', mfsDirPath);

     for (let i=0; i < entries.length; i++) {

	 var hash = entries[i]['Hash'];
	 var name = entries[i]['Name']; 
	 let type = entries[i]['Type'];

	 console.log('createTableOfEntriesOfMfsDirPath.hash:',hash);
	 console.log('createTableOfEntriesOfMfsDirPath.name:',name);
	 console.log('createTableOfEntriesOfMfsDirPath.type:',type);

	 let tr = createElementTable (table,'tr', '');
	 createElementTable (tr, 'td', createPinButtonOfHash (hash));
	 createElementTable (tr, 'td', typeImageOfJsonOfKey (entries, i)); 
	 createElementTable (tr, 'td', createNameButtonOfMfsDirPath(mfsDirPath,name,type,hash));
	 createElementTable (tr, 'td', linkIpfsHash (hash));
     }
 }

 function createNameButtonOfMfsDirPath (mfspath, name, type, hash) {
     console.log('createNameButtonOfMfsDirPath.input.mfspath:',mfspath);
     console.log('createNameButtonOfMfsDirPath.input.name:',name);
     console.log('createNameButtonOfMfsDirPath.input.type:',type);
     console.log('createNameButtonOfMfsDirPath.input.hash:',hash);

     let but = '<input type="button" id="nameButton" value="';
     but += name;
     if (type == 1){
	 but += '" onclick="addNameOnInputMfsPath(this.value)"';

	 var hid = document.getElementsByClassName('hiddenForFile')[0];
	 hid.hidden = false
	 var hid = document.getElementsByClassName('hiddenForDir')[0];
	 hid.hidden = true
	 
     } else {
	 but += '" onclick="displayFileOptions(' + "'" + name + "'" + ',' + "'" + hash + "'" + ')"';
	 console.log('createNameButtonOfMfsDirPath.but',but);
     }
     but += '>';
     return but;
 }

 function addNameOnInputMfsPath (mfspath) {
     console.log ('addNameOnInputMfsPath.input.mfspath:', mfspath);

     let oldMfsdir = document.getElementById('CurrentMfsDirectoryId').value;
     console.log ('addNameOnInputMfsPath.oldMfsdir:', oldMfsdir);
     let path = oldMfsdir;
     if (oldMfsdir == '/'){
	 path += mfspath;
     } else {
	 path += '/';
	 path += mfspath;
     }
     console.log ('addNameOnInputMfsPath.path:', path);
     var del = document.getElementById('idRemoveFileOrDirectory');
     del.value = path;
     var mfsdir = document.getElementById('CurrentMfsDirectoryId');
     mfsdir.value = path;
     document.getElementById('idRemoveButton').disabled = false;
     document.getElementById('CurrentMfsDirectoryClickId').click();
 }

 function createElementTable (ele, tag, value) {
     let doc = document.createElement (tag);
     doc.style = "padding:7px";
     doc.innerHTML = value;
     ele.appendChild (doc);
     return doc;
 }
 
</script>

<!-- End of Table Functions -->
