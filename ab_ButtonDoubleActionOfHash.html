<!DOCTYPE html>
<html>
    <head>
    </head>
    <body>
QmNQ7mTXCxQQQThLWdH6wzNT8SvgRjGXYSu2YaSit4PrQK	
<div name="divA"></div>
	
<script>
 window.onload = createDivHashElement ();
 
 function createDivHashElement () {
     createTagSpanOnDiv ();
     createInputText ();
     createGetHashButton ();     
 }
 
 function createTagSpanOnDiv () {
     var p = document.createElement("span");
     p.name = "B";
     p.innerHTML = "Enter Hash";
     document.getElementsByName('divA')[0].appendChild(p);
 }

 function createInputText () {
     var inp = document.createElement("input");
     inp.id = "hash";
     inp.type = "text";
     inp.name = "hash";
     inp.size = 50;
     document.getElementsByName("divA")[0].appendChild(inp);
 }

 function createGetHashButton () {
     var but = document.createElement("input");
     but.type = "submit";
     but.name = "inputType";
     but.onclick = function (){getHash()};
     but.innerHTML = "Submit";
     document.getElementsByName("divA")[0].appendChild(but);
 }

 function createButtonElement () {
     var but = document.createElement("button");
     but.name = "butX";
     but.type = "button"
     but.onclick = function () {alert('Button clicked')};
     document.getElementsByName("divA")[0].appendChild(but);
 }

 function createImageElement () {
     let pin = "indirect-through";
     var img = document.createElement("img");
     img.src = "images/pinned-" + pin + "-200.png";
     img.width = 25;
     img.height = 25;
     img.title = "Click on image for action";
     document.getElementsByName("butX")[0].appendChild(img);
 }
 
 function createLinkElementOfHash (hash) {
     let link = "http://127.0.0.1:5001/ipfs/"+hash;
     var lin = document.createElement("a");
     lin.innerHTML = "link";
     lin.href = link;
     lin.target = "_blank";
     lin.title ="Click to view through hash";
     lin.onmouseover = function () {disableButton()};
     lin.onmouseout = function (){enableButton()};
     document.getElementsByName("butX")[0].appendChild(lin);
 }

 /* bouton inactif quand le curseur est sur le lien */
 function disableButton () {
     /* butName : hash du fichier ou dossier */	 
     let butName = "butX";
     
     document.getElementsByName(butName)[0].disabled = true;
     let but = document.getElementsByName(butName);
     console.log('disableButton.but', but);
 }
 
 /* bouton actif quand le curseur est hors du lien */
 function enableButton () {
     let butName = "butX";
     
     document.getElementsByName(butName)[0].disabled = false;
     let but = document.getElementsByName(butName);
     console.log('enableButton.but', but);
 }
 
 function getHash() {
     var hash = document.getElementById("hash").value;
     console.log('getHash.input.hash',hash)
     if (hash == "") {
	 alert("Name must be filled out");
	 return false;
     }
     createButtonElement ();
     createImageElement ();
     createLinkElementOfHash (hash);
 } 

</script>
    </body>
</html>
